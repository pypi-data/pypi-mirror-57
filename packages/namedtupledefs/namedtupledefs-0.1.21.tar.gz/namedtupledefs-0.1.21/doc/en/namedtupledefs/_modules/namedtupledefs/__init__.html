

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>namedtupledefs.__init__ &mdash; setupdocx  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.36
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Shortcuts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">namedtuple - patched for support of field defaults for Python3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_cockpit.html">apidoc</a></li>
</ul>
<p class="caption"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_abstract.html">1. Abstract</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_platform_support.html">2. Platform Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_blueprint.html">3. Blueprint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_documents.html">4. Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_resources.html">5. Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">6. Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references.html">7. External References</a></li>
</ul>
<p class="caption"><span class="caption-text">Application</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../howto/index.html">Howto</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">setupdocx</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>namedtupledefs.__init__</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for namedtupledefs.__init__</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;The package &#39;namedtupledefs&#39; provides a patched version of *collections.namedtuple* </span>
<span class="sd">with field defaults for *namedtuple*.</span>

<span class="sd">This package provides the syntax release *Python3*.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1">#</span>
<span class="c1"># Original Code: Copyright (c) 2001-2018 Python Software Foundation. All rights reserved.</span>
<span class="c1"># Original License: PSF LICENSE AGREEMENT FOR PYTHON</span>
<span class="c1"># Patches: Copyright (c) 2019 Arno-Can Uestuensoez @Ingenieurbuero Arno-Can Uestuensoez. </span>
<span class="c1">#          All rights reserved.</span>
<span class="c1"># Patches License: Artistic-License-2.0 + Forced-Fairplay-Constraints</span>
<span class="c1">#         Exception for the public integration into the standard library *collections* </span>
<span class="c1">#         by the PSF, than for the integrated public patches: </span>
<span class="c1">#              PSF LICENSE AGREEMENT FOR PYTHON.  </span>
<span class="c1">#</span>
<span class="c1"># Platform: Python-2</span>
<span class="c1">#   For the Python2 refer to the package namedtupledefs2.</span>
<span class="c1">#   </span>
<span class="c1">#   This package requires the *exec* statement/function, due to it&#39;s size it is</span>
<span class="c1">#   separated into two variants instead of using shared code.  </span>
<span class="c1">#</span>
<span class="c1"># Changes:</span>
<span class="c1"># </span>
<span class="c1"># 0. The template for the created tuple class:</span>
<span class="c1">#    1. Added member variable _fielddefaults - for documentation and online use.</span>
<span class="c1">#    2. Changed the call parameters of __new__ to {new_args} - with default values.</span>
<span class="c1">#       This is the only and one actual relevant code change of the created tuple class.</span>
<span class="c1"># </span>
<span class="c1"># 1. The fabric code:</span>
<span class="c1">#    1. Added documentation in functions doc-string. </span>
<span class="c1">#    2. Added code block for the creation of the call argument string of &#39;__new__&#39;.</span>
<span class="c1">#    3. Added &#39;new_args&#39; and &#39;_fielddefaults&#39; to the format parameters of</span>
<span class="c1">#       the class template.  </span>
<span class="c1">#          </span>


<span class="kn">import</span> <span class="nn">sys</span> <span class="k">as</span> <span class="nn">_sys</span>

<span class="kn">from</span> <span class="nn">operator</span> <span class="k">import</span> <span class="n">itemgetter</span> <span class="k">as</span> <span class="n">_itemgetter</span>
<span class="kn">from</span> <span class="nn">keyword</span> <span class="k">import</span> <span class="n">iskeyword</span> <span class="k">as</span> <span class="n">_iskeyword</span>

<span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">OrderedDict</span>


<span class="n">__author__</span> <span class="o">=</span> <span class="s1">&#39;Arno-Can Uestuensoez&#39;</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s2">&quot;Artistic-License-2.0 + Forced-Fairplay-Constraints&quot;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;Copyright (c) 2001-2018 Python Software Foundation. + &quot;</span> \
                <span class="s2">&quot;Copyright (C) 2019 Arno-Can Uestuensoez&quot;</span> \
                <span class="s2">&quot;@Ingenieurbuero Arno-Can Uestuensoez&quot;</span> \
                <span class="s2">&quot;All rights reserved.&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s1">&#39;0.1.1&#39;</span>
<span class="n">__uuid__</span> <span class="o">=</span> <span class="s2">&quot;19683f50-48f2-4e1e-953f-640455e97340&quot;</span>

<span class="n">__docformat__</span> <span class="o">=</span> <span class="s2">&quot;restructuredtext en&quot;</span>


<span class="c1">################################################################################</span>
<span class="c1">### namedtuple</span>
<span class="c1">################################################################################</span>

<span class="k">class</span> <span class="nc">NamedTupleError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="n">_class_template</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s2">from builtins import property as _property, tuple as _tuple</span>
<span class="s2">from operator import itemgetter as _itemgetter</span>
<span class="s2">from collections import OrderedDict</span>
<span class="s2">from copy import copy</span>

<span class="s2">import namedtupledefs</span>

<span class="s2">class </span><span class="si">{typename}</span><span class="s2">(tuple):</span>
<span class="s2">    &#39;&#39;&#39;</span><span class="si">{typename}</span><span class="s2">(</span><span class="si">{arg_list}</span><span class="s2">) </span>
<span class="s2">    with optional default values fielddefaults=</span><span class="si">{field_defaults}</span><span class="s2"> =&gt; </span><span class="si">{typename}</span><span class="s2">(</span><span class="si">{new_args}</span><span class="s2">)&#39;&#39;&#39;</span>

<span class="s2">    __slots__ = ()</span>

<span class="s2">    _fields = </span><span class="si">{field_names!r}</span><span class="s2"></span>
<span class="s2">    _fielddefaults = </span><span class="si">{field_defaults}</span><span class="s2"></span>

<span class="s2">    def __new__(_cls, </span><span class="si">{new_args}</span><span class="s2">):</span>
<span class="s2">        &#39;Create new instance of </span><span class="si">{typename}</span><span class="s2">(</span><span class="si">{new_args}</span><span class="s2">)&#39;</span>
<span class="s2">        return _tuple.__new__(_cls, (</span><span class="si">{arg_list}</span><span class="s2">))</span>

<span class="s2">    @classmethod</span>
<span class="s2">    def _make(cls, iterable, new=tuple.__new__, len=len):</span>
<span class="s2">        &#39;Make a new </span><span class="si">{typename}</span><span class="s2"> object from a sequence or iterable&#39;</span>
<span class="s2">        result = new(cls, iterable)</span>
<span class="s2">        if len(result) != </span><span class="si">{num_fields:d}</span><span class="s2">:</span>
<span class="s2">            raise TypeError(&#39;Expected </span><span class="si">{num_fields:d}</span><span class="s2"> arguments, got </span><span class="si">%d</span><span class="s2">&#39; </span><span class="si">% le</span><span class="s2">n(result))</span>
<span class="s2">        return result</span>

<span class="s2">    def _replace(_self, **kwds):</span>
<span class="s2">        &#39;Return a new </span><span class="si">{typename}</span><span class="s2"> object replacing specified fields with new values&#39;</span>
<span class="s2">        result = _self._make(map(kwds.pop, </span><span class="si">{field_names!r}</span><span class="s2">, _self))</span>
<span class="s2">        if kwds:</span>
<span class="s2">            raise ValueError(&#39;Got unexpected field names: </span><span class="si">%r</span><span class="s2">&#39; </span><span class="si">% li</span><span class="s2">st(kwds))</span>
<span class="s2">        return result</span>

<span class="s2">    def __repr__(self):</span>
<span class="s2">        &#39;Return a nicely formatted representation string&#39;</span>
<span class="s2">        return self.__class__.__name__ + &#39;(</span><span class="si">{repr_fmt}</span><span class="s2">)&#39; </span><span class="si">% s</span><span class="s2">elf</span>

<span class="s2">    def _asdict(self):</span>
<span class="s2">        &#39;Return a new OrderedDict which maps field names to their values.&#39;</span>
<span class="s2">        return OrderedDict(zip(self._fields, self))</span>

<span class="s2">    def __getnewargs__(self):</span>
<span class="s2">        &#39;Return self as a plain tuple.  Used by copy and pickle. Does not need the fielddefaults.&#39;</span>
<span class="s2">        return tuple(self)</span>

<span class="s2">    __dict__ = _property(_asdict)</span>

<span class="s2">    def __getstate__(self):</span>
<span class="s2">        &#39;Exclude the OrderedDict from pickling&#39;</span>
<span class="s2">        pass</span>

<span class="s2">    def _merge(self, typename, *others):</span>
<span class="s2">        &#39;Add multiple &quot;namedtuple&quot; resulting in a new &quot;namedtuple&quot; of class &quot;typename&quot;.&#39;</span>
<span class="s2">        _fn = copy(self._fields)</span>
<span class="s2">        _fd = copy(self._fielddefaults)  # spare None-check</span>
<span class="s2">        _t = ()</span>
<span class="s2">        for o in others:</span>
<span class="s2">            if not hasattr(o, &#39;_fields&#39;) or not hasattr(o, &#39;_fielddefaults&#39;):</span>
<span class="s2">                raise ValueError(</span>
<span class="s2">                    &quot;supports only classes from: namedtupledefs.namedtuple &quot; + str(o))</span>
<span class="s2">            # check for non-scattered function style default values</span>
<span class="s2">            if _fd and (not o._fielddefaults or len(o._fielddefaults) != len(o._fields)):</span>
<span class="s2">                raise ValueError(</span>
<span class="s2">                    &quot;default values are right bound and must not be scattered: </span><span class="si">%s</span><span class="s2"> / </span><span class="si">%s</span><span class="s2">&quot;</span>
<span class="s2">                    %(str(o._fields), str(o._fielddefaults))</span>
<span class="s2">                    )</span>
<span class="s2">            _fn += o._fields</span>
<span class="s2">            _fd += o._fielddefaults</span>
<span class="s2">            _t  += o  # want the tuple values without fiddling</span>
<span class="s2">        # resulting names have to be valid - the tuple will check finally </span>
<span class="s2">        tp = namedtupledefs.namedtuple(typename, _fn, fielddefaults=_fd)</span>
<span class="s2">        return tp(*tuple.__add__(self, _t))</span>

<span class="si">{field_defs}</span><span class="s2"></span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">_repr_template</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{name}</span><span class="s1">=</span><span class="si">%r</span><span class="s1">&#39;</span>
 
<span class="n">_field_template</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s1">    </span><span class="si">{name}</span><span class="s1"> = _property(_itemgetter(</span><span class="si">{index:d}</span><span class="s1">), doc=&#39;Alias for field number </span><span class="si">{index:d}</span><span class="s1">&#39;)    </span>
<span class="s1">&#39;&#39;&#39;</span>

<div class="viewcode-block" id="namedtuple"><a class="viewcode-back" href="../../namedtupledefs_init.html#namedtupledefs.__init__.namedtuple">[docs]</a><span class="k">def</span> <span class="nf">namedtuple</span><span class="p">(</span><span class="n">typename</span><span class="p">,</span> <span class="n">field_names</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">rename</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">module</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Returns a new subclass of tuple with named fields.</span>

<span class="sd">    &gt;&gt;&gt; Point = namedtuple(&#39;Point&#39;, [&#39;x&#39;, &#39;y&#39;])</span>
<span class="sd">    &gt;&gt;&gt; Point.__doc__                   # docstring for the new class</span>
<span class="sd">    &#39;Point(x, y)&#39;</span>
<span class="sd">    &gt;&gt;&gt; p = Point(11, y=22)             # instantiate with positional args or keywords</span>
<span class="sd">    &gt;&gt;&gt; p[0] + p[1]                     # indexable like a plain tuple</span>
<span class="sd">    33</span>
<span class="sd">    &gt;&gt;&gt; x, y = p                        # unpack like a regular tuple</span>
<span class="sd">    &gt;&gt;&gt; x, y</span>
<span class="sd">    (11, 22)</span>
<span class="sd">    &gt;&gt;&gt; p.x + p.y                       # fields also accessible by name</span>
<span class="sd">    33</span>
<span class="sd">    &gt;&gt;&gt; d = p._asdict()                 # convert to a dictionary</span>
<span class="sd">    &gt;&gt;&gt; d[&#39;x&#39;]</span>
<span class="sd">    11</span>
<span class="sd">    &gt;&gt;&gt; Point(**d)                      # convert from a dictionary</span>
<span class="sd">    Point(x=11, y=22)</span>
<span class="sd">    &gt;&gt;&gt; p._replace(x=100)               # _replace() is like str.replace() but targets named fields</span>
<span class="sd">    Point(x=100, y=22)</span>

<span class="sd">    Provides optional default values with similar behaviour to function parameters.</span>
<span class="sd">    </span>
<span class="sd">    &gt;&gt;&gt; Point = namedtuple(&#39;Point&#39;, [&#39;x&#39;, &#39;y&#39;, &#39;z&#39;], fielddefaults=(22, 33))</span>

<span class="sd">    &gt;&gt;&gt; Point.__doc__                   # docstring for the new class with defaults</span>

<span class="sd">    &#39;Point(x, y, z)\n    with optional default values fielddefaults=(22, 33)&#39;</span>
<span class="sd">    </span>
<span class="sd">    &gt;&gt;&gt; Point(11)                       # instantiate with partial positional args or keywords</span>
<span class="sd">    Point(x=11, y=22, z=33)</span>
<span class="sd">    &gt;&gt;&gt; Point(11, y=22)                 # instantiate with partial positional args or keywords</span>
<span class="sd">    Point(x=11, y=22, z=33)</span>
<span class="sd">    &gt;&gt;&gt; p = Point(11, y=22)             # instantiate with positional args or keywords</span>
<span class="sd">    &gt;&gt;&gt; p[0] + p[1] + p[2]              # indexable like a plain tuple</span>
<span class="sd">    66</span>
<span class="sd">    &gt;&gt;&gt; x, y, z = p                     # unpack like a regular tuple</span>
<span class="sd">    &gt;&gt;&gt; x, y, z</span>
<span class="sd">    (11, 22, 33)</span>
<span class="sd">    &gt;&gt;&gt; p.x + p.y + p.z                 # fields also accessible by name</span>
<span class="sd">    66</span>
<span class="sd">    &gt;&gt;&gt; d = p._asdict()                 # convert to a dictionary</span>
<span class="sd">    &gt;&gt;&gt; d[&#39;z&#39;]</span>
<span class="sd">    33</span>
<span class="sd">    &gt;&gt;&gt; Point(**d)                      # convert from a dictionary</span>
<span class="sd">    Point(x=11, y=22, z=33)</span>
<span class="sd">    &gt;&gt;&gt; p._replace(x=100)               # _replace() is like str.replace() but targets named fields</span>
<span class="sd">    Point(x=100, y=22, z=33)</span>
<span class="sd">    &gt;&gt;&gt; p._replace(z=100)               # _replace() works for fields with default values as well</span>
<span class="sd">    Point(x=11, y=22, z=100)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Validate the field names.  At the user&#39;s option, either generate an error</span>
    <span class="c1"># message or automatically replace the field name with a valid name.</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="n">field_names</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">field_names</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">]</span>

    <span class="n">typename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">typename</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rename</span><span class="p">:</span>
        <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">field_names</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="ow">or</span> <span class="n">c</span><span class="o">==</span><span class="s1">&#39;_&#39;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">name</span><span class="p">)</span>
                <span class="ow">or</span> <span class="n">_iskeyword</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="ow">or</span> <span class="ow">not</span> <span class="n">name</span>
                <span class="ow">or</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span>
                <span class="ow">or</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
                <span class="ow">or</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">):</span>
                <span class="n">field_names</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;_</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">index</span>
            <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="n">typename</span><span class="p">]</span> <span class="o">+</span> <span class="n">field_names</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Type names and field names must be strings&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="ow">or</span> <span class="n">c</span><span class="o">==</span><span class="s1">&#39;_&#39;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">name</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Type names and field names can only contain &#39;</span>
                             <span class="s1">&#39;alphanumeric characters and underscores: </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_iskeyword</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Type names and field names cannot be a &#39;</span>
                             <span class="s1">&#39;keyword: </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Type names and field names cannot start with &#39;</span>
                             <span class="s1">&#39;a number: </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
    <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">rename</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Field names cannot start with an underscore: &#39;</span>
                             <span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Encountered duplicate field name: </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># add default values for the &#39;__new__&#39; call and store default values for eventual</span>
    <span class="c1"># processing in the member variable &#39;_fielddefaults&#39;</span>
    <span class="n">_field_defaults</span> <span class="o">=</span> <span class="n">kargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fielddefaults&#39;</span><span class="p">)</span>
    <span class="n">_new_args</span> <span class="o">=</span> <span class="n">field_names</span><span class="p">[:]</span>
    <span class="k">if</span> <span class="n">_field_defaults</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">_field_defaults</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">field_names</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;More defaults than fields: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">_field_defaults</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">field_names</span><span class="p">)))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_field_defaults</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Requires a &#39;tuple&#39; or &#39;list&#39; for &#39;fielddefaults&#39;.&quot;</span><span class="p">)</span>
        <span class="n">field_defaults</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">_field_defaults</span><span class="p">))</span>  <span class="c1"># strip off derived classes</span>
        <span class="n">_new_args</span> <span class="o">=</span> <span class="n">field_names</span><span class="p">[:]</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">_field_defaults</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_field_defaults</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">d</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">_new_args</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">d</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;=&quot;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">_field_defaults</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">d</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">)</span> 
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_new_args</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">d</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;=&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">_field_defaults</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">d</span><span class="p">])</span> 
    <span class="k">else</span><span class="p">:</span>
        <span class="n">field_defaults</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Fill-in the class template</span>
    <span class="n">class_definition</span> <span class="o">=</span> <span class="n">_class_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">typename</span> <span class="o">=</span> <span class="n">typename</span><span class="p">,</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">field_names</span><span class="p">),</span>
        <span class="n">field_defaults</span> <span class="o">=</span> <span class="n">field_defaults</span><span class="p">,</span>
        <span class="n">new_args</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">_new_args</span><span class="p">))</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">num_fields</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">field_names</span><span class="p">),</span>
        <span class="n">arg_list</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">field_names</span><span class="p">))</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">repr_fmt</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_repr_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
                             <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">),</span>
        <span class="n">field_defs</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_field_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
                               <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">field_names</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">class_definition</span><span class="p">)</span>

    <span class="c1"># Execute the template string in a temporary namespace and support</span>
    <span class="c1"># tracing utilities by setting a value for frame.f_globals[&#39;__name__&#39;]</span>
    <span class="n">namespace</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="vm">__name__</span><span class="o">=</span><span class="s1">&#39;namedtuple_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">typename</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">exec</span><span class="p">(</span><span class="n">class_definition</span><span class="p">,</span> <span class="n">namespace</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">SyntaxError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">SyntaxError</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">message</span> <span class="o">+</span> <span class="s1">&#39;:</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">class_definition</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">namespace</span><span class="p">[</span><span class="n">typename</span><span class="p">]</span>

    <span class="n">result</span><span class="o">.</span><span class="n">_source</span> <span class="o">=</span> <span class="n">class_definition</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">_source</span><span class="p">)</span>

    <span class="c1"># For pickling to work, the __module__ variable needs to be set to the frame</span>
    <span class="c1"># where the named tuple is created.  Bypass this step in environments where</span>
    <span class="c1"># sys._getframe is not defined (Jython for example) or sys._getframe is not</span>
    <span class="c1"># defined for arguments greater than 0 (IronPython).</span>
    <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">module</span> <span class="o">=</span> <span class="n">_sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">f_globals</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;__name__&#39;</span><span class="p">,</span> <span class="s1">&#39;__main__&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
            <span class="k">pass</span>
    <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">result</span><span class="o">.</span><span class="vm">__module__</span> <span class="o">=</span> <span class="n">module</span>

    <span class="k">return</span> <span class="n">result</span></div>

</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Copyright (C) 2016 Arno-Can Uestuensoez @Ingenieurbuero Arno-Can Uestuensoez
      <span class="lastupdated">
        Last updated on Dec 05, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>